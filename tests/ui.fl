import "UI.fl";

f := UI.Frame( .title := "test", .size := [1000, 400] ) {
    UI.Panel( .layout := UI.Layout.HorizontalWrap, .spacing := 5 ) {
        UI.ActivityIndicator( .value := true ),
        UI.Button( .label := "b1", .proportion := 1, .align := UI.Alignment.Stretch, .on_value_change := args |-> { print("test b1"); r.value :+= 1; } ),
        UI.Button( .label := "b2", .align := UI.Alignment.End, .on_value_change := args |-> { print("test b2"); r.value :-= 1 } ),
        c := UI.Calendar(),
        ch := UI.Checkbox( .label := "Hide", .on_value_change := args |-> { val := ch.value; c.visible := !ch.value; } ),
        cp := UI.ColorPicker( .label := "Color Picker", .on_value_change := args |-> { print(cp.value); } ),
        r := UI.Gauge( .align := UI.Alignment.Center, .range := 10, .value := 5 ),
        UI.FilePicker( .align := UI.Alignment.Center ),
        di := UI.Dialog( .title := "Same buttons", .layout := UI.Layout.Vertical ) {
            UI.Label( .label := "Select a button" ),
            UI.Panel( .layout := UI.Layout.Horizontal ) {
                UI.Button( .label := "b1", .proportion := 1, .align := UI.Alignment.Stretch, .on_value_change := args |-> { print("test b1"); r.value :+= 1; } ),
                UI.Button( .label := "b2", .align := UI.Alignment.End, .on_value_change := args |-> { print("test b2"); r.value :-= 1 } ),
            }
        },
        UI.Button( .label := "Open Dialog", .on_value_change := args |-> { di.visible := true; } ),
        UI.Hyperlink( .label := "Link to Google", .value := "www.google.fr" ),
        UI.Box( .label := "Texts", .layout := UI.Layout.HorizontalWrap, .spacing := 5 ) {
            UI.Search( .label := "Search", .value := "john doe", .min_size := [200, 50] ),
            t := UI.Text( .label := "Write", .value := "michel", .min_size := [200, 50], .on_value_change := args |-> { print(t.value); } ),
            UI.MultilineText( .label := "Write", .value := "", .min_size := [300, 100] ),
            UI.Password( .label := "Password", .value := "pass", .min_size := [100, 50] ),
        },
        UI.Choice( .options := ["a", "b", "c"], .value := 1, .min_size := [100, 50] ),
        slider := UI.Slider( .label := "Slider", .min := 0, .max := 10, .value := 5, .on_value_change := args |-> { print(slider.value); } )
    },
};
f.create();
f.open();
print("ok");

f2 := UI.Frame( .title := "test webview", .min_size := [600, 400] ) {
    UI.Panel( .layout := UI.Layout.Vertical, .proportion := 1, .align := UI.Alignment.Stretch ) {
        UI.Panel( .layout := UI.Layout.Horizontal, .align := UI.Alignment.Stretch, .spacing := 5 ) {
            urlBar := UI.Text(
                .min_size := [200, 50],
                .proportion := 1,
                .align := UI.Alignment.Stretch,
                .border := -1
            ),
            UI.Button(
                .label := "Browse",
                .border := -1,
                .background_color := [0, 0, 0, 255],
                .foreground_color := [255, 0, 0, 255],
                .align := UI.Alignment.Stretch,
                .on_value_change := args |-> { wb.url := urlBar.value; }
            ),
        },
        wb := UI.Webview(
            .url := "https://google.com/",
            .proportion := 1,
            .align := UI.Alignment.Stretch,
            .on_url_change := args |-> { urlBar.set_silent(wb.url); }
        ),
    },
};
f2.create();
f2.open();
